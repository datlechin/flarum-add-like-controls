(()=>{var n={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return n.d(o,{a:o}),o},d:(e,o)=>{for(var r in o)n.o(o,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e)};(()=>{"use strict";const e=flarum.core.compat["forum/app"];var o=n.n(e);const r=flarum.core.compat["common/extend"],a=flarum.core.compat["forum/utils/DiscussionControls"];var s=n.n(a);const t=flarum.core.compat["forum/components/DiscussionPage"];var i=n.n(t);const u=flarum.core.compat["common/components/Button"];var c=n.n(u);o().initializers.add("datlechin/flarum-add-like-controls",(function(){(0,r.extend)(s(),"userControls",(function(n,e,o){if(app.session.user&&!(o instanceof i())){var r=app.current.get("routeName");if("index"===r||"following"===r){if(e.isHidden())return;var a=e.isRead();n.add("markAsRead",c().component({icon:a?"fas fa-check-circle":"far fa-check-circle",onclick:function(){a?e.save({lastReadPostNumber:null,unread:!0}):e.save({lastReadPostNumber:e.lastPostNumber()})}},app.translator.trans(a?"datlechin-flarum-add-like-controls.forum.mark_unread":"datlechin-flarum-add-like-controls.forum.mark_read")))}}})),(0,r.extend)(s(),"userControls",(function(n,e,o){if(app.session.user&&!(o instanceof i())){var r=app.current.get("routeName");if("index"===r||"following"===r){var a=e.firstPost();if(!a||a.isHidden()||!("flarum-likes"in flarum.extensions))return;var s=a.likes(),t=app.session.user&&s&&s.some((function(n){return n===app.session.user}));n.add("like",c().component({icon:t?"fas fa-thumbs-up":"far fa-thumbs-up",onclick:function(){t=!t,a.save({isLiked:t})}},app.translator.trans(t?"flarum-likes.forum.post.unlike_link":"flarum-likes.forum.post.like_link")))}}})),(0,r.extend)(s(),"userControls",(function(n,e,o){if(app.session.user&&!(o instanceof i())){var r=app.current.get("routeName");if("index"===r||"following"===r){if(e.isHidden())return;var a=e.subscription();n.add("ignore",c().component({icon:"ignore"===a?"fas fa-eye":"far fa-eye-slash",onclick:function(){e.save({subscription:"ignore"===a?null:"ignore"})}},app.translator.trans("ignore"===a?"flarum-subscriptions.forum.discussion_controls.unignore_button":"datlechin-flarum-add-like-controls.forum.ignore")))}}}))}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map