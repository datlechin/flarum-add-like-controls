(()=>{var e={n:o=>{var n=o&&o.__esModule?()=>o.default:()=>o;return e.d(n,{a:n}),n},d:(o,n)=>{for(var r in n)e.o(n,r)&&!e.o(o,r)&&Object.defineProperty(o,r,{enumerable:!0,get:n[r]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};(()=>{"use strict";e.r(o);const n=flarum.core.compat["forum/app"];var r=e.n(n);const a=flarum.core.compat["common/extend"],t=flarum.core.compat["forum/utils/DiscussionControls"];var s=e.n(t);const i=flarum.core.compat["forum/components/DiscussionPage"];var u=e.n(i);const l=flarum.core.compat["common/components/Button"];var c=e.n(l);r().initializers.add("datlechin/flarum-add-like-controls",(function(){(0,a.extend)(s(),"userControls",(function(e,o,n){if(app.session.user&&!(n instanceof u())){var r=app.current.get("routeName");if("index"===r||"following"===r){if(o.isHidden())return;var a=o.isRead();e.add("markAsRead",c().component({icon:a?"fas fa-check-circle":"far fa-check-circle",onclick:function(){a?o.save({lastReadPostNumber:null,unread:!0}):o.save({lastReadPostNumber:o.lastPostNumber()})}},app.translator.trans(a?"datlechin-flarum-add-like-controls.forum.mark_unread":"datlechin-flarum-add-like-controls.forum.mark_read")))}}})),(0,a.extend)(s(),"userControls",(function(e,o,n){if(app.session.user&&!(n instanceof u())){var r=app.current.get("routeName");if("index"===r||"following"===r){var a=o.firstPost();if(!a||a.isHidden()||!("flarum-likes"in flarum.extensions))return;var t=a.likes(),s=app.session.user&&t&&t.some((function(e){return e===app.session.user}));e.add("like",c().component({icon:s?"fas fa-thumbs-up":"far fa-thumbs-up",onclick:function(){s=!s,a.save({isLiked:s})}},app.translator.trans(s?"flarum-likes.forum.post.unlike_link":"flarum-likes.forum.post.like_link")))}}})),(0,a.extend)(s(),"userControls",(function(e,o,n){if(app.session.user&&!(n instanceof u())){var r=app.current.get("routeName");if("index"===r||"following"===r){if(o.isHidden())return;var a=o.subscription();e.add("ignore",c().component({icon:"ignore"===a?"fas fa-eye":"far fa-eye-slash",onclick:function(){o.save({subscription:"ignore"===a?null:"ignore"})}},app.translator.trans("ignore"===a?"flarum-subscriptions.forum.discussion_controls.unignore_button":"datlechin-flarum-add-like-controls.forum.ignore")))}}}))}))})(),module.exports=o})();
//# sourceMappingURL=forum.js.map